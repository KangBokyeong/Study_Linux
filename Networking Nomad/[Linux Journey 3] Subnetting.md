# [Linux Journey 3] Subnetting
## 1. IPv4
- 네트워크 호스트가 찾을 수있는 고유한 주소
- 주소의 예
  > 204.23.124.23
- 마침표로 옥텟으로 구분
- IPv4 주소에는 4개의 옥텟이 있음.
- 옥텟 -> 8 비트 = 1바이트
- IPv4 주소는 4바이트로 간주
- 서브넷과 IP 주소를 다룰 때는 비트를 자주 사용.
- ifconfig -a 명령을 사용하여 IP 주소 보기
  > eth0      Link encap:Ethernet  HWaddr 1d:3a:32:24:4d:ce   
  >  
  >           inet addr:192.168.1.129  Bcast:192.168.1.255  Mask:255.255.255.0  
  > 
  >           inet6 addr: fd60::21c:29ff:fe63:5cdc/64 Scope:Link  
    
    - 여기서 192.168.1.129가 내 IPv4주소 임을 알 수 있음.
    

## 2. Subnets
- 특정 방식으로 유사한 IP 주소를 가진 호스트 그룹
- 일반적으로 서로 인접한 위치에 있으며 동일한 서브넷의 호스트간에 데이터를 쉽게 보낼 수 있음.
- 서브넷 마스크
  - IP 주소의 어느 부분이 네트워크 부분이고 어떤 부분이 호스트 부분인지 결정
  - 일반적인 서브넷 마스크
    > 255.255.255.0
      - 255부분은 실제로 우리 마스크
      
- 아래와 같이 접두사에 이어 서브넷 마스크로 나타낼 수 있음.
  > 123.234.0.0/255.255.0.0

- 왜 서브넷을 사용하는지?
  - 서브넷은 네트워크를 구분하고 해당 네트워크 내의 트래픽 흐름을 제어하는데 사용됨. 따라서 한 서브넷의 호스트는 다른 서브넷의 다른 호스트와 상호 작용할 수 없음.

## 3. Subnet Math
- IP 주소가 192.168.1.0 이고 서브넷 마스크가 255.255.255.0 이라고 가정
- 이 숫자를 이진 형식으로 나열 시 아래와 같음.
  - 192.168.1.165  = 11000000.10101000.00000001.10100101
  - 255.255.255.0  = 11111111.11111111.11111111.00000000
    - 우리가 가질 수있는 유일한 호스트는 00000000 지역
    - 이진 형식의 11111111이 255와 같음을 기억하고 호스트 번호로 0을 고려하므로 256 가지 가능한 옵션이 있음.
    - BUT! 256 개의 가능한 옵션이있는 것처럼 보일 수 있지만 브로드 캐스트 주소와 서브넷 주소를 고려해야하므로 서브넷에 254 개의 가능한 호스트를 남겨두기 때문에 실제로 2 개의 호스트를 뺌.
    - 192.168.1.1 ~ 192.168.1.254 범위의 IP 주소를 가진 호스트를 가질 수 있음.

## 4. Subnetting Cheats
### base-2 계산 외우기
- 2^1 = 2
- 2^2 = 4
- 2^3 = 8 
- 2^4 = 16
- 2^5 = 32
- 2^6 = 64
- 2^7 = 128
- 2^8 = 256
- 2^9 = 512
- 2^10 = 1024
- 2^11 = 2048
- 2^12 = 4096

### 십진수-이진수 차트  
![](https://user-images.githubusercontent.com/44868847/52422363-43139d80-2b39-11e9-84ed-89041a13055e.png)


### 이진으로 192.168.23.43 변환
1. 192 - 128을 뺄 수 있는지? 가능. 첫 번째 비트는 1.
2. 192 - 128 = 64, 차트의 다음 숫자는 64. 64 - 64를 뺄 수 있는지? 가능, 두 번째 비트는 1입니다.
3. 빼는 숫자가 없어 졌기 때문에 192의 이진 형식은 11000000

### 바이너리 11000000을 10 진수로 변환
- 이진에서 십진수로 변환하려면 1이있는 숫자를 몽땅 더하기
  > 128 + 64 + 0 + 0 + 0 + 0 + 0 + 0 = 192!

## 5. CIDR (classless inter-domain routing)
- 서브넷 마스크를보다 간결하게 표현하는데 사용
- 10.42.3.0/255.255.255.0과 같은 서브넷이 10.42.3.0/24로 쓰여져 있는 CIDR 표기법으로 표기된 서브넷을 볼 수 있음.
- 이는 서브넷 접두사와 서브넷 마스크를 모두 포함하고 있음을 의미.
- IP 주소는 4바이트 또는 32비트로 구성되며, CIDR은 네트워크 접두사로 사용되는 비트의 양을 나타냄.
- 123.12.24.0/23은 처음 23비트를 사용한다는 것을 의미.
  - 간단한 수법은 IP 주소가 가질 수 있는 총 비트 수(32)를 CIDR 주소(23개)에서 빼서 9비트, 2^9 = 512를 남기는 것이지만, 2개의 주소(하위 주소 및 브로드캐스트 주소)를 제거해야 하기 때문에 510개의 사용 가능한 호스트가 있음.

## 6. NAT (network address translation)
- 라우터와 같은 장치를 인터넷과 사설 네트워크 사이의 중개자 역할.
- 전체 컴퓨터 그룹을 나타 내기 위해서는 고유하고 유일한 IP 주소가 필요

### 작동 방법(간단한 경우)
1. 패티가 www.google.com 에 연결하려고 하므로 기기가 라우터를 통해 이 요청을 보냄.
2. 라우터가 요청을 받아 google.com에 대한 자체 연결을 연 다음 연결이되면 패티의 요청을 보냄
3. 라우터는 패티와 www.google.com 사이의 중개자. Google은 패티에 대해 알지 못함.

- 일반적으로 구체적인 사항은 다루지 않음

## 7. IPv6
- 우리가 더 많은 호스트를 인터넷에 연결할 수 있도록하기 위해 만들어짐.
- 주소가 쓰여지는 일반적인 방법은 아래와 같으며, 이것이 IPv4와의 차이점이라 할 수 있음.  
  > 2dde:1235:1256:3:200:f8ed:fe23:59cf
