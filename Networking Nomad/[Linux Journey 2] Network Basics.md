# [Linux Journey 2] Network Basics
## 1. Network Basics
- 일반적인 홈 네트워크 살펴 보기
- 몇 가지 구성 요소
  - ISP: 귀하의 인터넷 서비스 제공 업체, 집에서 인터넷을 사용하기 위해 지불하는 회사
  - Router: 네트워크의 각 컴퓨터가 인터넷에 연결 가능하게 함. 대부분의 최신 라우터에서는 무선 또는 이더넷 케이블을 통해 연결 가능.
  - WAN(Wide Area Network): 라우터와 인터넷 같은 모든 네트워크를 망라하는 네트워크
  - WLAN(Wireless Local Area Network): 라우터와 랩톱과 같은 무선 장치 사이의 네트워크
  - LAN(Local Area Network): 라우터와 데스크탑 PC와 같은 유선 장치 간의 네트워크
  - Hosts: 네트워크상의 각 시스템

## 2. OSI(Open Systems Interconnection) Model
- 이론적인 네트워킹 모델
- 패킷이 7 개의 다른 계층에서 네트워크를 통과하는 방식

## 3. TCP/IP Model
- 일반적으로 TCP / IP로 지칭하는 TCP / IP 프로토콜을 사용
- 네트워크를 통해 데이터를 수집, 주소 지정, 전송 및 라우팅하는 방법을 지정하기 위해 함께 작동
- 패킷이 네트워크를 통해 이동하는 방식을 보여주는 방법을 확인 가능

### Application Layer
- TCP / IP 모델의 최상위 계층.
- 컴퓨터의 프로그램 (예: 웹 브라우저)이 전송 계층 서비스와 인터페이스하여 전송되거나 수신되는 데이터를 보는 방법을 결정
- 이 계층에서는 다음을 사용
  - HTTP (Hypertext Transfer Protocol): 인터넷의 웹 페이지에 사용
  - SMTP (Simple Mail Transfer Protocol): 전자 메일 (전자 메일) 전송

### Transport Layer
- 데이터 전송 방법에는 올바른 포트 확인, 데이터 무결성 및 기본적으로 패킷 전달이 포함됨.
- 이 계층에서는 다음을 사용
  - TCP (Transmission Control Protocol): 안정적인 데이터 전송
  - UDP (User Datagram Protocol): 신뢰할 수 없는 데이터 전달

### Network Layer
- 호스트 간 및 네트워크 간 패킷 이동 방법 지정
- 이 계층에서는 다음을 사용
  - IP (Internet Protocol): 한 컴퓨터에서 다른 컴퓨터로 패킷을 라우팅하는데 도움을 줌.
  - ICMP (Internet Control Message Protocol): 오류 메시지 및 디버깅 정보와 같은 상황을 알려줌.
  
### Link Layer
- 실제 하드웨어에서 데이터를 보내는 반법 지정
- 이더넷, 광섬유 등을 통해 이동하는 데이터
- 각 계층에서 사용하는 프로토콜 목록은 광범위하지 않음.
- 많은 다른 프로토콜을 사용하게 될 것임.

## 4. Network Addressing
### MAC Addresses
- 하드웨어 주소로 사용되는 고유 식별자
- 절대로 변경되지 않음.
- 인터넷에 액세스하려면 네트워크 인터페이스 카드라는 장치가 있어야함.
- 이 네트워크 어댑터에는 컴퓨터를 식별하는데 사용되는 자체 하드웨어 주소가 존재
- 이더넷 장치의 MAC 주소는 00:C4:B5:45:B2:43와 같음. 
- 제조 시, 네트워크 어댑터에 제공
- 각 제조업체에는 제조업체로 식별 가능한 OUI(organizationally unique identifier)가 있음.
- OUI는 MAC 주소의 처음 3 바이트로 표시됨.
  - 예) Dell은 00-14-22를 가지고 있으므로 Dell의 네트워크 어댑터는 00-14-22-34-B2-C2와 같은 MAC 주소를 가질 수 있음.

### IP Addresses
- 네트워크상의 장치를 식별하는데 사용
- 하드웨어에 독립적이며 IPv4 또는 IPv6을 사용하는지 여부에 따라 구문이 다를 수 있음.
- 일반적인 IP 주소는 10.24.12.4와 같음. (IPv4인 경우)
- 네트워킹의 소프트웨어 측에서 사용
- 시스템이 인터넷에 연결될 때마다 있어야 함.
- 네트워크가 변경되어 전체 인터넷에 고유한 경우에도 변경 가능(단, NAT인 경우는 예외)

### Hostnames
- IP 주소를 취하고 그 주소를 사람이 읽을 수있는 이름으로 묶을 수 있게 함.
- 192.12.41.4를 기억하는 대신 myhost.com을 기억할 수 있음.

## 5. Application Layer
- 패킷은 네트워크를 통해 데이터를 전송하는데 사용.
- 패킷은 헤더와 페이로드로 구성
  - 헤더: 패킷이 어디로 가고 어디에서 왔는지에 대한 정보 포함
  - 페이로드: 전송중인 실제 데이터
- 패킷이 네트워크를 가로 지르면서 각 레이어는 패킷의 헤더에 약간의 정보 추가
- 이 계층부터 시작함.

## 6. Transport Layer
- 네트워크가 데이터를 읽을 수 있는 방식으로 데이터를 전송하는데 도움이 됨.
- 데이터를 전송하여 올바른 순서로 다시 묶을 청크로 나눔.
- 세그먼트를 사용하면 네트워크를 통해 데이터를보다 쉽게 전송 가능

### Ports
- HTTP와 같은 서비스는 포트를 통해 통신 채널을 사용
- 웹 페이지 데이터를 보내려면 HTTP 포트 (포트 80)를 통해 보내야 함.
- 세그먼트를 생성하는 것 외에도 소스 및 대상 포트를 세그먼트에 연결하므로 수신자가 최종 패킷을 얻으면 사용할 포트 확인 가능

### UDP
- 데이터를 전송하는 신뢰할 수있는 방법이 아님.
- 모든 원본 데이터를 얻었는지 실제로 신경 쓰지는 않음.

### TCP
- 신뢰할 수있는 연결 지향적인 데이터 스트림 제공
- 포트를 사용하여 호스트와 데이터를 주고 받음.
- 응용 프로그램은 호스트의 한 포트에서 원격 호스트의 다른 포트로 연결을 열어 줌.
- 연결을 설정하기 위해 우리는 TCP 핸드 셰이크 사용
  - 클라이언트 (connecting process): SYN 세그먼트를 서버에 보내 연결 요청
  - 서버: 클라이언트에게 SYN-ACK 세그먼트를 보내 클라이언트의 연결 요청 확인
  - 클라이언트: 서버에 연결 요청을 확인하기 위해 ACK를 보냄.
- 위 연결이 설정 완료 시, TCP 연결을 통해 데이터 교환 가능.
- 데이터는 여러 세그먼트로 전송되고 TCP 시퀀스 번호로 추적되므로 배달 될 때 올바른 순서로 정렬될 수 있음.

## 7. Network Layer
- 소스 호스트에서 대상 호스트로 가는 패킷 라우팅 결정
- 모든 서브넷은 어떤 방식 으로든 서로 연결되기 때문에 자체 네트워크에 있더라도 www.google.com에 연결 가능
  - 서브넷: 인터넷을 구성하는 이러한 소규모 네트워크
- 전송 계층에서 오는 세그먼트를 수신하고 이 세그먼트를 IP 패킷에 캡슐화한 다음 원본 호스트의 IP 주소와 대상 호스트의 IP 주소를 패킷 헤더에 연결
- 이 시점에서 우리 패킷에는 그것이 어디로 가고 어디에서 왔는지에 대한 정보 존재.
- 패킷을 실제 하드웨어 계층으로 보냄.

## 8. Link Layer
- 하드웨어 특정 계층
- 우리의 패킷은 프레임이라 불리는 것으로 다시 한 번 캡슐화
- 프레임 헤더는 우리 호스트, 체크섬 및 패킷 분리 자의 소스 및 대상 MAC 주소를 첨부하여 수신자가 패킷이 끝나는 시점을 알 수 있도록 함.

### ARP (Address Resolution Protocol)
- IP 주소와 연관된 MAC 주소를 찾음.
- 동일한 네트워크 내에서 사용.
- 패티가 같은 네트워크에 있지 않다면, 패킷을 받을 다음 라우터를 결정하기 위해 라우팅 시스템을 사용할 것이고, 같은 네트워크에 있으면 ARP 사용 가능..
- 같은 네트워크에 있으면 시스템은 먼저 IP 주소가 어떤 MAC 주소와 연관되는지에 대한 정보를 저장하는 ARP 조회 테이블 사용
- 값이 없으면 ARP 사용
- ARP 프로토콜을 사용하여 네트워크에 브로드 캐스트 메시지를 보내 IP 10.10.1.4를 가진 호스트를 찾음.
  - 브로드 캐스트 메시지: 네트워크의 모든 호스트 (브로드 캐스트 전송을 위해 적절하게 명명 됨)로 전송되는 특수 메시지
- 요청한 IP 주소를 가진 컴퓨터는 IP 주소와 MAC 주소가 포함 된 ARP 패킷으로 응답
- 이 프레임을 네트워크 인터페이스 카드를 통해 다음 장치로 전달하고 패티의 네트워크를 찾음.

### Packet Traversal
1. Pete는 Patty에게 전자 메일을 보냄. 이 데이터는 전송 계층으로 전송됨.
2. 전송 계층은 TCP 또는 UDP 헤더에 데이터를 캡슐화하여 세그먼트를 형성하고, 세그먼트는 대상 및 소스 TCP 또는 UDP 포트를 연결한 다음 세그먼트를 네트워크 계층에 전송.
3. 네트워크 계층은 IP 패킷 내부에 TCP 세그먼트를 캡슐화하고 원본 및 대상 IP 주소를 연결. 그런 다음 패킷을 링크 계층에 라우팅.
4. 패킷은 Pete의 물리적 하드웨어에 도달하고 프레임에 캡슐화됨. 원본 및 대상 MAC 주소가 프레임에 추가됨.
5. Patty는 물리적 계층을 통해 이 데이터 프레임을 수신하고 각 프레임에 데이터 무결성을 확인한 다음 프레임 내용을 압축을 풀고 IP 패킷을 네트워크 계층으로 보냄.
6. 네트워크 계층은 이전에 첨부된 원본 및 대상 IP를 찾기 위해 패킷을 읽음. 그것의 IP가 목적지 IP와 동일한 지 검사. 패킷을 캡슐 해제하고 세그먼트를 전송 계층으로 보냄.
7. 전송 계층은 세그먼트를 캡슐화 해제하고 TCP 또는 UDP 포트 번호를 확인한 다음 해당 포트 번호를 기반으로 응용 프로그램 계층에 연결.
8. 응용 프로그램 계층은 지정된 포트의 전송 계층에서 데이터를 수신하여 최종 전자 메일 메시지 형태로이를 Patty에게 제공.

## 9. DHCP (Dynamic Host Configuration Protocol) Overview
- IP 주소, 서브넷 마스크 및 게이트웨이를 시스템에 할당.
- 네트워크 관리자가 IP 주소 할당에 대해 걱정할 필요가 없으며 중복 IP 주소를 설정하지 못하게 함.
- 호스트가 IP 주소를 요청할 수 있도록 모든 실제 네트워크에는 자체 DHCP 서버가 있어야 함.
- 일반 가정에서는 라우터가 대개 DHCP 서버의 역할을 함.
- DHCP가 모든 동적 호스트 정보를 얻는 방법
  - DHCP DISCOVER: 이 메시지는 DHCP 서버를 검색하기 위해 브로드 캐스트 됨.
  - DHCP OFFER: 네트워크의 DHCP 서버가 제안 메시지로 응답. 이 제안에는 DHCP 임대 시간, 서브넷 마스크, IP 주소 등이 포함 된 패킷이 들어 있음.
  - DHCP REQUEST: 클라이언트는 다른 브로드 캐스트를 전송하여 모든 DHCP 서버에 허용 된 제공을 알림.
  - DHCP ACK: Acknowledgement는 서버에 의해 보내짐.
  
