# [Linux Journey 6] Processes
## ps(Processes)
- 컴퓨터에서 실행중인 프로그램.
- 커널에 의해 관리되며 각 프로세스는 프로세스 ID (PID)와 관련된 ID가 있음.
  - PID는 프로세스가 생성된 순서대로 할당 됨.
- ps 명령어를 실행하면 실행 중인 프로세스의 목록 확인 가능(다음 아래 표는 예시임)

  |PID|TTY|STAT|TIME|CMD|
  |:-----:|:-----:|:-----:|:-----:|:-----:|
  | 41230  |  pts/4 |  Ss  |  00:00:00 |  bash |
  | 51224  |  pts/4 |  R+  |  00:00:00 |   ps  |

  - PID: 프로세스 ID
  - TTY: 프로세스와 연관된 제어 단자
  - STAT: 프로세스 상태 코드
  - TIME: CPU의 총 사용 시간
  - CMD: 실행 파일 / 명령의 이름

- ps aux 명령어 실행 중 aux 각각의 의미
  - a: 다른 사용자에 의해 실행되는 것을 포함하여 실행중인 모든 프로세스 표시
  - u: 프로세스에 대한 자세한 내용 표시
  - x: TTY가없는 모든 프로세스 나열
- 앞으로 다룰 내용
  - USER: 유효 사용자 (우리가 사용하는 액세스 권한이있는 사용자)
  - %CPU: 사용 된 CPU 시간을 프로세스가 실행 된 시간으로 나눈 값
  - %MEM: 프로세스의 상주 세트 크기와 시스템의 실제 메모리의 비율
  - VSZ: 전체 프로세스의 가상 메모리 사용
  - RSS(Resident set size):  작업에서 사용한 스왑되지 않은 물리적 메모리
  - TTY: 프로세스와 연관된 제어 단자
  - STAT: 프로세스 상태 코드
  - START: 프로세스의 시작 시간
  - TIME: CPU의 총 사용 시간
  - COMMAND: 실행 파일 / 명령의 이름
 
  - 가장 많이 볼 수 있는 필드: PID, STAT 및 COMMAND

- top 명령어: 스냅샷 대신 시스템에서 실행중인 프로세스에 대한 실시간 정보 제공

## Controlling Terminal
- TTY: 명령을 실행한 처미널
- regular terminal devices 와 pseudoterminal devices
  - regular terminal device: 입력해서 시스템에 출력을 보낼 수 있는 네이티브 터미널 장치
    - segue를 사용하여 이 동작을 볼 수 있음.
    - Ctrl-Alt-F1을 입력하여 TTY1(첫 번째 가상 콘솔)에 들어가고 터미널, 그래픽이 없는 경우를 확인.
    - Ctrl-Alt-F7로 종료.
  - pseudoterminal devices: 쉘 창으로 단말기를 모방하고 PTS에 의해 표시

## Process Details
- 프로세스의 자세한 정보: 프로그램을 실행하기 위해 메모리, CPU, I/O를 할당하는 시스템
- 커널: 프로세스 담당. 프로그램 실행 시 프로그램 코드를 메모리에 로드, 리소스 결정, 할당한 뒤 각 프로세스의 지속적인 모니터링
  - 프로세스 상태
  - 프로세스가 사용 중이고 받는 리소스
  - 프로세스 소유자
  - 신호 처리
  - 그리고 기본적으로 다른 모든 것들
  - 커널의 일: 프로세스 수요에 따라 적절한 양의 자원을 얻는 것.
  - 프로세스 종료 시, 다른 프로세스를 위해 사용한 리소스가 확보됨.

## Process Creation
- 새로운 프로세스 생성 시, 기존 프로세스는 기본적으로 포크 시스템 호출이라는 것을 사용하여 복제됨.
  - 포크 시스템 호출 -> 대부분 동일한 자식 프로세스 생성.
  - 자식 프로세스 -> 새로운 프로세스 ID(PID)를 사용하여 원래 프로세스는 부모 프로세스가 됨.
  - 부모 프로세스 ID PPID라고 하는 것을 가짐.
- 이후 자식 프로세스는 무모가 이전에 사용하던 것과 동일한 프로그램을 계속 사용하거나, 새로운 프로그램을 시작하기 위해  execve system 호출을 더 자주 사용할 수 있음.
  - 시스템 호출 -> 커널이 해당 프로세스에 사용한 메모리 관리 파괴, 새로운 프로그램을 위해 새로운 메모리 설정
- ps l 명령어를 입력하여 동작 알아가보기
  - l: 실행 중인 프로세스에 대한 long format(긴 형식) 또는 훨씬 더 자세한 보기 제공 

## Process Termination
- 프로세스 종료 시, _exit system 호출을 사용하여 종료
- 어떤 과정이 종료될 준비가 되면, 그것은 왜 그것이 종료 상태라고 불리는 것으로 끝나는지를 커널에 알려줌.
- 가장 일반적인 상태: 프로세스가 성공했음을 의미
- 자식 프로세스가 종료해야지만 부모 프로세스를 종료할 수 있음.(대기 시스템 호출을 사용하여 자식 프로세스의 종료 승인)

### 프로세스 종료 시 두 가지 방법
- Orphan Processes
  - 부모 프로세스가 자식 프로세스 전에 종료되면 커널은 대기 전화를 받지 않을 것이라는 것을 알고 있으므로, 대신 이러한 프로세스를 "고정"하게 하고 초기 단계의 관리 하에 둠
  -  Init은 결국 이 고아들이 죽을 수 있도록 대기 시스템 호출을 수행할 것임.

- Zombie Processes
  - 기술적으로 '죽음'이기 때문에 죽일 수 없음.
  - 부모가 대기 시스템을 호출하면 좀비는 사라질 것이고, 이것은 "복제"라고 알려져 있음.
  - 이 프로세스가 많은 경우는 공간을 차지하기 때문에 많은 것은 좋지 않음.

## Signals


## kill (Terminate)


## niceness


## niceness


## Process States


## /proc filesystem


##  Job Control 
